![](..\图片\2-31【Linux】\1.png)

# 第一章 Linux各目录

| 目录        |                                                              |
| ----------- | ------------------------------------------------------------ |
| /bin        | 存放二进制可执行文件(`ls`,`cat`,`mkdir`等)，常用命令一般都在这里。 |
| /etc        | 存放系统管理和配置文件                                       |
| /home       | 存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就是`/home/user`，可以用`~user`表示 |
| /usr        | 用于存放系统应用程序，比较重要的目录`/usr/local`本地系统管理员软件安装目录（安装系统级的应用）。这是最庞大的目录，要用到的应用程序和文件几乎都在这个目录。 |
| /opt        | 额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把tomcat等都安装到这里。 |
| /proc       | 虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息。 |
| /root       | 超级用户（系统管理员）的主目录（特权阶级）                   |
| /sbin       | 存放二进制可执行文件，只有`root`才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如`ifconfig`等。 |
| /dev        | 用于存放设备文件。                                           |
| /mnt        | 系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统。 |
| /boot       | 存放用于系统引导时使用的各种文件                             |
| /lib        | 存放跟文件系统中的程序运行所需要的共享库及内核模块。共享库又叫动态链接共享库，作用类似windows里的`.dll`文件，存放了根文件系统程序运行所需的共享文件。 |
| /tmp        | 用于存放各种临时文件，是公用的临时文件存储点。               |
| /var        | 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等。 |
| /lost+found | 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么`.chk`）就在这里 |

# 第二章 Linux的常用命令

Linux命令格式如下：command [-options] [parameter]

说明：

* command：命令名称
* [-options]：选项，可以用来对命令进行控制，也可以省略
* [parameter]：传给命令的参数，可以是零个、一个或者多个。

> []代表可选，命令名称、选项、参数之间要有空格进行分割。

如果我们不知道参数，可以使用`--help`。例如：`mkdir --help`，那么就会显示参数。

## 2.1 关机、重启和注销

| 命令              | 作用             |
| ----------------- | ---------------- |
| shutdown -h now   | 即刻关机         |
| shutdown -r now   | 重启             |
| shutdown -h 10    | 10分钟后关机     |
| shutdown -h 11:00 | 11：00关机       |
| shutdown -c       | 取消指定时间关机 |
| shutdown -r 10    | 10分钟之后重启   |
| shutdown -r 11:00 | 定时重启         |

| 命令      | 作用     |
| --------- | -------- |
| init 0    | ⽴刻关机 |
| telinit 0 | 关机     |
| poweroff  | ⽴刻关机 |
| halt      | 关机     |
| reboot    | 重启     |
| init 6    | 重启     |

## 2.2 文件和目录操作

增删改查

- **切换目录命令**
- **列出文件列表**

- **创建目录、移除文件和目录**
- **重命名和移动目录**
- **复制文件和目录**
- **查找文件**

**切换目录命令**

可以使用tab键来补全文件路径

| 命令        | 作用                                     |
| ----------- | ---------------------------------------- |
| cd <⽬录名> | 进⼊某个⽬录 cd（change directory）      |
| cd ..       | 回上级⽬录                               |
| cd ../..    | 回上两级⽬录                             |
| cd          | 进个⼈主⽬录                             |
| cd -        | 回上⼀步所在⽬录                         |
| cd /        | 切换到系统根目录                         |
| cd ~        | 切换到用户主目录                         |
| pwd         | 显示当前路径 pwd（print work directory） |

**列出文件列表**

ls是list的缩写，通过ls 命令不仅可以查看目录和文件信息，还可以目录和文件权限、大小、主人和组等信息。

`ls(list)`是一个非常有用的命令，用来显示当前目录下的内容。配合参数的使用，能以不同的方式显示目录内容。 

 格式：`ls[参数] [路径或文件名]`

| 命令    | 作用                                           |
| ------- | ---------------------------------------------- |
| ls      | 查看⽂件⽬录列表                               |
| ls -F   | 查看⽬录中内容（显示是⽂件还是⽬录）           |
| ls -l   | 查看⽂件和⽬录的详情列表（等于`ll`命令）       |
| ls -a   | 显示所有文件或目录（包含隐藏的文件）           |
| ls -lh  | 查看⽂件和⽬录的详情列表（增强⽂件⼤⼩易读性） |
| ls -lSr | 查看⽂件和⽬录列表（以⽂件⼤⼩升序查看）       |
| tree    | 查看⽂件和⽬录的树形结构                       |

**创建目录、移除文件和目录**

`rm` 删除文件。用法：`rm [选项]... 文件...`   删除需要用户确认, `rm - f` 删除不询问

| 命令                    | 作用                                                   |
| ----------------------- | ------------------------------------------------------ |
| mkdir <⽬录名>          | 创建⽬录 mkdir（make directory）                       |
| mkdir dir1 dir2         | 同时创建两个⽬录                                       |
| mkdir -p /tmp/dir1/dir2 | 创建⽬录树，创建了tmp下面又创建了dir1，dir1下面有dir2  |
| touch a.txt             | 如果文件不存在创建一个空文件                           |
| rmdir dir1              | 删除'dir1'⽬录（如果dir1目录下面有东西，那么无法删除） |
| rm -f file1             | 删除'file1'⽂件，无需确认直接删除                      |
| rm -r a                 | 删除文件夹及内容，删除前需要确认                       |
| rm -rf dir1             | 删除'dir1'⽬录和其内容，不询问递归删除                 |
| rm -rf dir1 dir2        | 同时删除两个⽬录及其内容                               |
| rm -rf *                | 删除所有文件                                           |
| rm -rf /*               | <font color = "red">自杀</font>                        |

**重命名和移动目录**

`mv` 移动或者重命名

| 命令               | 作用                                                         |
| ------------------ | ------------------------------------------------------------ |
| mv old_dir new_dir | 重命名/移动⽬录                                              |
| mv a.txt ../       | 将`a.txt`文件移动到上一层目录中                              |
| mv a.txt b.txt     | 将`a.txt`文件重命名为`b.txt`                                 |
| mv lin/ xuan/      | 如果xuan目录不存在，那么将lin目录更名为xuan<br />如果xuan目录村子啊，那么将lin目录移动到xuan目录中 |

**复制文件和目录**

`cp(copy)`命令可以将文件从一处复制到另一处。一般在使用`cp`命令时将一个文件复制成另一个文件或复制到某目录时，需要指定源文件名与目标文件名或目录。

| 命令                | 作用                                        |
| ------------------- | ------------------------------------------- |
| cp file1 file2      | 复制⽂件                                    |
| cp -a dir1 dir2     | 复制⽬录                                    |
| cp -r lin/ ./xuan/  | 将lin目录和目录下所有文件复制到xuan目录下面 |
| cp -r lin/* ./xuan/ | 将lin目录下所有文件复制到xuan目录下面       |
| cp a.txt b.txt      | 将`a.txt`复制为`b.txt`文件                  |
| cp a.txt ../        | 将`a.txt`文件复制到上一层目录中             |

**查找文件**

`find`查找命令。`find`指令用于查找符合条件的文件

| 命令                             | 作用                                      |
| -------------------------------- | ----------------------------------------- |
| find . -name "*.java"            | 在当前目录及其子目录下面查找.java结尾文件 |
| find / -name “ins*”              | 查找文件名称是以ins开头的文件             |
| find /dir -name *.bin            | 在⽬录/dir中搜带有.bin后缀的⽂件          |
| find / –user linxuan –ls         | 查找用户linxuan的文件                     |
| find / –user linxuan –type d –ls | 查找用户linxuan的目录                     |
| find /-perm -777 –type d-ls      | 查找权限是777的文件                       |

## 2.3 文件查看和处理

- **查看文件内容**
- **查找文件内容**

**查看文件内容**

按 q 键退出查看，ctrl+c也可以结束查看

| 命令             | 作用                                                         |
| ---------------- | ------------------------------------------------------------ |
| cat file1        | 查看文件内容。`cat`用于显示文件的内容                        |
| cat -n file1     | 查看内容并标示行数                                           |
| tac file1        | 从最后⼀行开始反看⽂件内容                                   |
| more file1       | `more`用于要显示的内容会超过一个画面长度的情况。<br />按空格键显示下一个画面。回车显示下一行内容。按 `q` 键退出查看，`ctrl+c`也可以结束查看，b返回上一页。 |
| less file1       | `less`用法和`more`类似，不同的是`less`可以通过`PgUp`、`PgDn`键来控制。 |
| head file1       | 查看文件前十行信息                                           |
| head -2 file1    | `PgUp` 和 `PgDn` 进行上下翻页。查看⽂件前两⾏。              |
| tail -2 file1    | 查看⽂件后两⾏。用于显示文件后几行的内容。                   |
| tail -f /log/msg | 实时查看添加到⽂件中的内容，动态查看日志。`ctrl+c` 结束查看  |
| wc -l file1      | 查看文件行数                                                 |

**查找文件内容**

`grep`查找字符串，查找文件里符合条件的字符串。用法: `grep [选项]... PATTERN [FILE]...`

| 命令                         | 作用                                                     |
| ---------------------------- | -------------------------------------------------------- |
| grep linxuan hello.txt       | 在⽂件hello.txt中查找关键词linxuan                       |
| grep hello *.java            | 查找当前目录中所有.java结尾的文件中包含hello字符串的位置 |
| grep linxuanhello.txt –color | 在⽂件hello.txt中查找关键词linxuan并且高亮显示           |
| grep ^linxuanhello.txt       | 在⽂件hello.txt中查找以linxuan开头的内容                 |
| grep [0-9] hello.txt         | 选择hello.txt⽂件中所有包含数字的⾏                      |

## 2.4 打包和解压

`tar`打包或解压

`tar`命令位于`/bin`目录下，它能够将用户所指定的文件或目录<font color = "red">打包成一个文件，但不做压缩。</font>

一般Linux上常用的压缩方式是选用`tar`将许多文件打包成一个文件，再以`gzip`压缩命令压缩成xxx.tar.gz(或称为`xxx.tgz`)的文件。常用参数：

- `-z`：z代表的是gzip，调用`gzip`压缩命令进行压缩
- `-c`：c代表的是create，创建一个新`tar`文件
- `-x`：x代表的是extract，解开`tar`文件
- `-v`：v代表的是verbose，显示运行过程的信息
- `-f`：f代表的是file，用于指定文件名

| 命令                               | 作用                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| zip xxx.zip file                   | 压缩⾄zip包                                                  |
| tar –cvf hello.tar ./              | 将当前目录下面所有文件打包，打包后的文件叫做hello.tar        |
| tar –zcvf hello.tar.gz ./*         | 将当前目录下面所有文件打包并且压缩，打包后的文件叫做hello.tar.gz |
| tar –xvf hello.tar                 | 将hello.tar文件解包，并将解包后的文件放在当前的目录          |
| tar -zxvf hello.tar.gz -C /usr/aaa | 将hello.tar.gz文件解压，并将解包后的文件放在/usr/aaa的目录   |

## 2.6 其他常用命令

| 命令                                     | 作用                                           |
| ---------------------------------------- | ---------------------------------------------- |
| clear/ crtl + L                          | 清屏                                           |
| sudo su                                  | 切换管理员。$ 是普通权限， #是管理员权限。     |
| su 用户名                                | 退出管理员权限。或者用`exit`。                 |
| hostnamectl                              | 查看本机名称                                   |
| echo 'LANG=en_US.UTF-8″' >> /etc/profile | 将'LANG=en_US.UTF-8″' 追加至/etc/profile文件中 |
| source /etc/profile                      | 重新加载/etc/profile文件                       |

## 2.7 重定向输出>和>>

`>` 重定向输出，覆盖原有内容；`>>` 重定向输出，有追加功能；

前面的命令没必要必须是查看，只要是能够在控制台输出的命令即可。

- `cat /etc/passwd > a.txt` 将输出定向到a.txt中
- `cat /etc/passwd >> a.txt` 输出并且追加
- `ifconfig > ifconfig.txt` 将控制台输出的IP信息，放到文件里面

## 2.8 系统管理命令

`ps` 正在运行的某个进程的状态

- `ps –ef` 查看所有进程
- `ps –ef | grep '进程的名称'` 查找某一进程
- `kill 2868` 杀掉2868编号的进程
- `kill -9 2868` 强制杀死进程

## 2.9 管道|

管道是Linux命令中重要的一个概念，其作用是<font color = "red">将一个命令的输出用作另一个命令的输入。</font>

- `ls --help | more` 分页查询帮助信息
- `ps –ef | grep java` 查询名称中包含java的进程
- `ifconfig | more`
- `cat index.html | more`
- `ps –ef | grep aio`

# 第三章Vim编辑器

Vim模式如下：

- **普通模式 / 默认模式**：执行 Vim 的指令，如移动光标，复制、删除 、粘贴文本等等，不能进行输入（打字）。
- **插入模式 / 编辑模式**：进行文本输入（打字），和普通编辑器一样。
- **替换模式**：进行字符替换。
- **可视模式 / 选择模式**：进行文本选择。
- **命令模式**：在 Vim 底部最后一行中输入命令，按回车并执行。

## 3.1 普通模式

在Linux的命令行通过*vi文件名*或*vim文件名*即可<font color="red">用VIM编辑器打开你的文件</font>，打开文件后默认是进入了普通模式，我们可以用h、j、k、l四个按键分别左、下、上、右地移动光标。

回到普通模式，仅需要敲一下键盘左上角的Esc按键即可（界面左下角的--INSERT--标志消失）。

### 3.1.1 移动

- `h j k l`：四个按键分别代表左、下、上、右。
- `Ctrl + f`：屏幕『向下』移动一页，相当于 [Page Down]按键
- `Ctrl + b`：屏幕『向上』移动一页，相当于 [Page Up] 按键
- `0或者Home`：移动到这一行的最前面字符处
- `$或者End`：移动到这一行的最后面字符处（注意输入法状态`￥`和`$`不一样）
- `G`：移动到文件最后一行
- `[数字n]G`：移动到文件的第n行
- `gg`：移动到文件的第1行，相当于`1G`
- `n<Enter>`：n 为数字。光标向下移动 n 行

### 3.1.2 删除

在普通模式下，删除单一字符可以用`x`命令。跟在插入模式按下Delete键一样，x命令是删除光标指定的字符。

删除更多字符可以使用d命令！使用删除操作符`d`的删除命令的格式是`dmotion`，`d`是`Delete`的意思，`motion`即指定要删除的对象，所以这个命令可以很灵活！

* `dgg`：删除光标所在行（包含）到文件开头的所有字符
* `dG`：删除光标所在行（包含）到文件末尾的所有字符
* `dd`：删除光标所在行的所有字符

> **注意：这上面所有的“删除”操作并不是真的删除，它们事实上是存放在VIM的一个缓冲区（VIM把它称之为寄存器）中，相当于Windows的剪切功能！！！**

### 3.1.3 粘贴

使用`p`命令可以将最后一次删除的内容粘贴到光标之后。大写的`P`则是粘贴到光标之前。

先使用`dd`命令将当前行删除，然后再使用`p`命令就可以粘贴了

### 3.1.4 拷贝

VIM用`y`命令实现拷贝。语法跟删除的`d`命令一样：`ymotion`。

- `yy`表示拷贝当前行
- `3yy`则表示拷贝3行
- `y$`表示从光标所在的位置拷贝到行尾的所有字符
- `yG`则表示从光标所在行拷贝到文件末尾行的所有字符

### 3.1.5 撤销

小写的`u`表示撤销最后一次修改；大写的`U`表示撤销对整行的修改。

`Ctrl+r`快捷键可以恢复撤销的内容！！

### 3.1.6 简单替换

VIM还提供了一个简单的替换命令：`r`命令。`r`用于替换光标所在的字符，做法是先将光标移动到需要替换的字符处，按一下`r`键，然后输入新的字符。

不会进入插入模式，也不会进入替换模式。

### 3.1.7 其他

* 快捷键`ctrl+g`可以查看当前的文件信息，比如文件名，文件状态，文件的总行数，以及光标所在的相对位置。
* 将光标移动到`()`，`[]`，`{}`，中的任何一半括号上，按下`%`键，便可看到此时光标已经跳转到另外一半的括号上了。

## 3.2 插入模式

敲一下i按键使得VIM切换到插入模式（界面左下角显示--INSERT--字样），此时你可以自由的编辑文档了，就像你在Windows下使用记事本那样去编辑。

当然，并不只有敲击按键i才能进入插入模式，其实方法多了去了：

| **按键** | **含义**                                 |
| -------- | ---------------------------------------- |
| i        | 在光标的前边进入插入模式                 |
| I        | 在光标所在行的行首进入插入模式           |
| a        | 在光标的后边进入插入模式                 |
| A        | 在光标所在行的行尾进入插入模式           |
| o        | 在光标所在行的下方插入空行并进入插入模式 |
| O        | 在光标所在行的上方插入空行并进入插入模式 |
| s        | 删除光标指定的字符并进入插入模式         |
| S        | 将光标所在行清除并进入插入模式           |

## 3.3 替换模式

对于需要替换多个字符，更好的方案是直接进入替换模式。按下大写的`R`键，屏幕左下角出现`--REPLACE--`字样，说明你已经处于替换模式。

此时输入字符可以连续替换光标及其后边的内容。注意：退格键（`Backspace`）在替换模式中被解释为<font color="red">如果左边内容被替换过，则恢复到原来的样子；如果没有被替换过，则简单的向左移动。</font>修改完毕后，按下`Esc`回到普通模式。

## 3.4 可视模式

这时，你可以按一下`v`进入可视模式（左下角出现`--VISUAL--`字样），然后通过`h、j、k、l`或其他`motion`来移动你的光标，此时光标所到之处必被一道亮光所包围（表示被选中），选择好需要缩进的目标后，只需按一下`>`即可完成任务。

## 3.5 命令模式

输入冒号（`:`）进入命令行模式

在普通模式下按下斜杠（`/`）也是进入命令行模式，此时该字符和光标均出现在屏幕的底部，这跟冒号（`:`）一样。

在普通模式下按下问号（`?`）也是进入命令行模式，实现的也是搜索功能。

### 3.5.1 退出

- `:q`：退出Vim
- `:q!`：若曾修改过文件，又不想储存，使用 ! 为强制离开不储存档案。
- `:w`：保存
- `:wq`：储存后离开，若为 :wq! 则为强制储存后离开

### 3.5.2 搜索

`/目标`和`?目标`都是搜索

|              | **/目标**      | **?目标**      |
| ------------ | -------------- | -------------- |
| **搜索方向** | 从光标位置向后 | 从光标位置向前 |
| **n**        | 向后搜索下一个 | 向前搜索下一个 |
| **N**        | 向前搜索下一个 | 向后搜索下一个 |

当搜索到了文件的末尾（`/目标`）或开头（`?目标`），页面下方面会显示`“SearchhitBOTTOM,continuingatTOP”`或`“SearchhitTOP,continuingatBOTTOM”`的字样。

表示一轮搜索到文件尾/头了，搜索下一个就是从文件头/尾开始咯。

VIM会自动高亮所有匹配的目标，即使在你找到目标之后，它们仍然高傲的亮着！如何取消呢？输入冒号（`:`）进入命令行模式，然后输入`nohl`即可。

> 最后提个醒：在搜索命令中，`.`、`*`、`[`、`]`、`^`、`%`、`/`、`?`、`~`和`$`这10个字符有着特殊意义，所以在使用这些字符的时候要在前面加上一个反斜杠（`\`），比如你要搜索问号，则输入`/\?`

### 3.5.3 高级替换

- `:s/old/new`，这样即可将光标所在行的第一个`old`替换为`new`；
- `:s/old/new/g`，则表示将光标所在行的所有`old`替换为`new`。
- `:%s/old/new/g`表示替换整个文件中每个匹配的字符串。
- `:5,13s/old/new/g`即可胜任你的要求。5表示开始替换的行号，13表示结束替换的行号

## 3.6 VIM数字和命令

VIM利用数字可以干老多的事儿了。

比如普通模式下按一下`h`按键是将光标向左移动一格，而在其前面输入数字3，即`3h`则是将光标向前移动3格，依此类推`3j`则是将光标向下移动三行，`3w`则是将光标跳到三个单词后的开始位置……

同样的，`d3h`表示删除光标前的3个字符，`d3j`表示删除光标所在行以及下面3行的所有字符，而`d3w`则表示向后删除当前光标到后面第三个单词前的所有字符。



## 3.7 关于文件的命令

- **执行shell命令**
- **文件另存为**
- **局部内容另存为**
- **合并文件**
- **打开多个文件**

**执行shell命令**

运行在命令行下的VIM，貌似不可能“最小化”，这就有诸多不方便的地方了。比如有时我需要知道某个路径下有哪些文件（我的程序需要调用它们），那我可能就需要先关闭VIM，然后查看有哪些文件，最后重新打开VIM。

这就显得有点折腾了，不符合VIM一直强调的高效作风！因此，伟大的VIM作者（BramMoolenaar）高呼一声“我有办法！”，于是祭出了一个感叹号（`!`）

比如你想知道根目录（`/`）下面有哪些目录和文件，可以在VIM中输入`:!ls/`

然后敲一下回车

即可显示根目录（`/`）下边有哪些目录和文件：

总之，在输入冒号（`:`）进入命令行模式，输入感叹号（`!`），在其后便可以加上shell命令。此后VIM将临时跳转回shell，并执行命令。再次按下Enter键回到VIM。

**文件另存为**

一般的文本编辑工具都会有“另存为”的功能，用于将文件重新存放到一个新的文件中（旧文件保留不变）。VIM也可以这么干，做法是输入`:w新文件名`

下边我用VIM打开的是test文件，然后我输入`:wtest2`

该命令会以`test2`为文件名拷贝保存整个`test`文件。

**局部内容另存为**

VIM除了支持文件另存为之外，还支持另一种新技能：文件局部另存为。言下之意就是，VIM可以将文件中的局部文本另存为一个新的文件，厉害吧？！

在普通模式中按下V键即进入可视模式，进入后左下角显示`--VISUAL--`

此时光标的位置开始为选中状态，你可以通过任何移动或范围的按键来移动光标，光标所到之处皆为选中状态（h、j、k、l移动光标，$去到行尾，0去到行首……）：

选好范围之后的操作就跟“文件另存为”一样了。

按下冒号（`:`）屏幕左下方出现`:'<,'>`，现在请输入`wtest2`。表示新建一个test2文件，并将选中的内容单独存放进去。

这里有个问题，如果路径中已经存在`test2`文件，那么VIM会提醒你需要加感叹号（`!`）才能强制覆盖文件。即输入`w!test2`

**合并文件**

所谓合并文件，便是在VIM打开的一个文件中读取并置入另一个文件。怎么样，光听着就觉得炫酷吧？！

命令很简单，只需要输入冒号（`:`）进入命令行模式，然后输入`r`文件名

即可将指定文件的内容读取并置入到光标的下一行中。

**打开多个文件**

VIM还可以同时打开多个文件，并且允许你通过水平或垂直的方式并排它们。

VIM使用`–o`或`–O`选项打开多个文件，其中–o表示垂直并排，例如`vim-olesson4lesson5lesson6`

`-O`表示水平并排，例如`vim-Olesson4lesson5lesson6`

打开后默认光标是落在第一个文件中的，此时之前学过的所有命令都可以上，不过仅限于第一个文件。那如何将焦点（光标）切换到另一个文件中呢？

很简单，使用`ctrl+w+w`将光标切换到下一个文件；或者使用`ctrl+w+方向（方向键或h、j、k、l）`。

- 对于垂直并排的文件：使用`ctrl+w+上、下方向`，表示上、下切换文件；
- 对于水平并排的文件：使用`ctrl+w+左、右方向`，表示左、右切换文件。


不错吧，这样搭配宽屏显示器或者多个显示器，逼格简直爆表！

退出文件的话可以使用原来的`q`、`q!`、`wq`或者`ZZ（shirt+z+z）`。

> 但你肯定会发现你如果同时打开三四个文件，这样子却不得不退出三四次才行。那么我们只需在原来退出命令的后边加上小写a，则表示退出动作是针对所有的（ALL）：qa、qa!、wqa

# 第四章 Linux的权限命令

Linux目录和Windows目录有着很大的不同，Linux目录类似一个树，最顶层是其根目录，如下图：

![](..\图片\2-31【Linux】\1-0.jpg)

- `/bin`二进制可执行命令

- `/dev`设备特殊文件

- `/etc`系统管理和配置文件

- `/etc/rc.d`启动的配置文件和脚本

- `/home`用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示

- `/lib`标准程序设计库，又叫动态链接共享库，作用类似windows里的.dll文件

- `/sbin`超级管理命令，这里存放的是系统管理员使用的管理程序

- `/tmp`公共的临时文件存储点

- `/root`系统管理员的主目录

- `/mnt`系统提供这个目录是让用户临时挂载其他的文件系统

- `/lost+found`这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里

- `/proc`虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息。

- `/var`某些大文件的溢出区，比方说各种服务的日志文件

- `/usr`最庞大的目录，要用到的应用程序和文件几乎都在这个目录，其中包含：

  - `/usr/x11R6`存放xwindow的目录

  - `/usr/bin`众多的应用程序

  - `/usr/sbin`超级用户的一些管理程序

  - `/usr/doc`linux文档

  - `/usr/include`linux下开发和编译应用程序所需要的头文件

  - `/usr/lib`常用的动态链接库和软件包的配置文件

  - `/usr/man`帮助文档

  - `/usr/src`源代码，linux内核的源代码就放在/usr/src/linux里

  - `/usr/local/bin`本地增加的命令

  - `/usr/local/lib`本地增加的库根文件系统



![](D:\Java\笔记\图片\2-31【Linux】\1-1.png)

在权限里面一共是有四个部分的，第一个部分是1个字符，第二个第三个第四个部分是3个字符，一共由十个字符代替。如上图。

![](..\图片\2-31【Linux】\1-2.png)

## 4.1 文件权限

- `r`：读，`read`。对文件是指可读取内容 对目录是可以`ls`，**代表数字是4**。
- `w`：写，`write`。对文件是指可修改文件内容，对目录 是指可以在其中创建或删除子节点(目录或文件)，**代表数字是2**。<font color = "red">如果用户没有写入的权限，那么使用vim将无法进行编辑，无法进入插入模式。</font>
- `x`：执行，`excute`。对文件是指是否可以运行这个文件，对目录是指是否可以`cd`进入这个目录，**代表数字是1**。

## 4.2 Linux三种文件类型

- 普通文件： 包括文本文件、数据文件、可执行的二进制程序文件等。 
- 目录文件： Linux系统把目录看成是一种特殊的文件，利用它构成文件系统的树型结构。 
- 设备文件： Linux系统把每一个设备都看成是一个文件

## 4.3 文件类型标识

普通文件（`-`）目录（`d`）符号链接（`l`）

* 进入`etc`可以查看，相当于快捷方式字符设备文件（c）块设备文件（s）套接字（s）命名管道（p）

## 4.4 文件权限管理

  `chmod` 变更文件或目录的权限。

* `chmod u=rwx,g=rx,o=rx a.txt`：对a.txt的权限进行修改

  u是当前的用户，g是当前组内其他用户，o是其他组内用户。

上述操作需要记忆字母，所以我们可以使用数字相加来帮忙。

<font color = "red">u == 4；g == 2；o == 1；相加起来为一组的权限。</font>

- `chmod 755 a.txt` 

# 第五章 Linux网络操作与软件安装

这些都是Centos6的命令，有的对于Centos7不适用

## 5.1 主机名配置

- `hostname` 查看主机名

- `hostname xxx` 修改主机名 重启后无效

  如果想要永久生效，可以修改`/etc/sysconfig/network`文件

## 5.2 IP地址配置

`ifconfig 查看(修改)ip地址(重启后无效)`

`ifconfig eth0 192.168.12.22 修改ip地址`

如果想要永久生效，修改 `/etc/sysconfig/network-scripts/ifcfg-eth0`文件

Centos7是使用`ip addr`来查看IP地址

```ABAP
DEVICE=eth0 #网卡名称
BOOTPROTO=static #获取ip的方式(static/dhcp/bootp/none)
HWADDR=00:0C:29:B5:B2:69 #MAC地址
IPADDR=12.168.177.129 #IP地址
NETMASK=255.255.255.0 #子网掩码
NETWORK=192.168.177.0 #网络地址
BROADCAST=192.168.0.255 #广播地址
NBOOT=yes #  系统启动时是否设置此网络接口，设置为yes时，系统启动时激活此设备。
```

## 5.3 域名映射

`/etc/hosts`文件用于在通过主机名进行访问时做ip地址解析之用,相当于windows系统的`C:\Windows\System32\drivers\etc\hosts`文件的功能

![](..\图片\2-31【Linux】\1-3.png)

就是我们起了一个别的名字，`127.0.0.1 == localhost`。

## 5.4 网络服务管理

- `service network status` 查看指定服务的状态

- `service network stop` 停止指定服务

- `service network start` 启动指定服务

- `service network restart` 重启指定服务
- `service --status–all` 查看系统中所有后台服务

- `netstat –nltp` 查看系统中网络进程的端口监听情况

**防火墙设置**

防火墙根据配置文件`/etc/sysconfig/iptables`来控制本机的”出”、”入”网络访问行为。<font color = "red">这是Centos6的</font>

- `service iptables status` 查看防火墙状态
- `service iptables stop` 关闭防火墙
- `service iptables start` 启动防火墙
- `chkconfig iptables off` 禁止防火墙自启

Centos7的防火墙操作

| 命令                                                         | 作用                     |
| ------------------------------------------------------------ | ------------------------ |
| systemctl status firewalld                                   | 查看防火墙状态           |
| firewall-cmd --state                                         | 查看防火墙状态 输出简洁  |
| systemctl start firewalld                                    | 启动防火墙               |
| systemctl stop firewalld                                     | 关闭防火墙               |
| systemctl enable firewalld                                   | 开机启用防火墙           |
| systemctl disable firewalld                                  | 开机禁用，永久关闭防火墙 |
| firewall-cmd --zone=public --add-port=8080/tcp --permanent   | 开放指定端口8080         |
| firewall-cmd --zone=public --list-ports                      | 查看防火墙开放的端口     |
| firewall-cmd --zone=public --query-port=8080/tcp             | 查看指定端口访问权限8080 |
| firewall-cmd --zone=public --remove-port=8080/tcp --permanent | 关闭指定端口防火墙8080   |
| firewall-cmd --reload                                        | 重新加载配置 立即生效    |

## 5.5 软件安装

一般我们下载的软件都会放在/usr/local里面

Linux上的软件安装有以下几种常见方式介绍

1. 二进制发布包

   软件已经针对具体平台编译打包发布，只要解压，修改配置即可

2. RPM包

   软件已经按照redhat的包管理工具规范RPM进行打包发布，需要获取到相应的软件RPM发布包，然后用RPM命令进行安装

3. Yum在线安装

   软件已经以RPM规范打包，但发布在了网络上的一些服务器上，可用yum在线安装服务器上的rpm软件，并且会自动解决软件安装过程中的库依赖问题

4. 源码编译安装

   软件以源码工程的形式发布，需要获取到源码工程后用相应开发工具进行编译打包部署。

上传与下载工具介绍

1. `FileZilla`， 我们已经下载了。

2. `lrzsz`

   我们可以使用yum安装方式安装 yum install lrzsz

   注意：必须有网络

   可以在crt中设置上传与下载目录 在命令行输入`rz`就可以上传文件了

3. `sftp`

   使用alt + p 组合键打开sftp窗口

   使用put 命令上传

   使用get命令下载

### 安装jdk

1. 使用上传工具FileZilla上传到Linux，上传的是二进制发布包，这里的是jdk1.7

2. 解压安装包：`tar -zxvf jdk版本 -C /usr/local`。这样会在usr/local解压，然后会有一个文件夹名为jdk1.7.0_75，里面包含着jdk。

   不过我们是在usr/local下面创建了一个jdk文件夹，让安装包解压到了jdk文件夹里面。`tar -zxvf jdk版本 -C /usr/local/jdk`

3. 配置环境变量，使用vim修改/etc/profile文件，在文件末尾加入如下配置

   ```bah
   JAVA_HOME=/usr/local/jdk/jdk1.7.0_75
   PATH=$JAVA_HOME/bin:$PATH
   ```

4. 重新加载profile文件，使更改的配置立即生效，命令为：`source /etc/profile`

5. 检查安装是否成功，命令为：`java -version`，出现版本号就代表正确了。

### 安装Tomcat

1. 利用上传工具FileZilla将Tomcat二进制发布包上传到Linux。

2. 解压安装包：`tar -zxvf apache-tomcat版本号 -C /usr/local`。

   老规矩我们在/usr/local下面创建了一个tomcat文件夹存放Tomcat，所以解压命令为：`tar -zxvf apache-tomcat版本号 -C /usr/local/tomcat`。

3. 进入Tomcat的bin目录启动服务，命令为：`sh.startup.sh`或者`./startup.sh`。

验证Tomcat是否启动成功，有多种方式：

* 查看启动日志

  ```bash
  more /usr/local/apache-tomcat-7.0.57/logs/catalina.out
  tail -50 /usr/local/apache-tomcat-7.0.57/logs/catalina.out
  ```

* 查看进程 ps -ef | grep tomcat

  ps命令是Linux下面非常强大的进程查看命令，相当于Windows中的任务管理器，通过ps -ef可以查看当前运行的所有进程的详细信息。

  | 在Linux中成为管道符，可以将前一个命令的结果输出给后一个命令作为输入

  使用ps命令查看进程的时候，经常配合管道符和查找命令grep一起使用，来查看特定的进程。

停止Tomcat服务的方式：

* 运行Tomcat的bin目录提供的停止服务的脚本文件shutdown.sh

  ```bash
  sh.shutdown.sh
  ./shutdown.sh
  ```

* 结束Tomcat进程

  查看Tomcat进程，获得进程id，然后使用kill命令来删除即可

  kill命令是Linux提供的用于结束进程的命令，-9表示强制结束

### 安装MySql

安装Mysql的话我们使用的是RPM安装方式，RPM软件包管理器，是红帽用于管理和安装软件的工具。

1. 检查当前系统中是否安装MySql数据库

   如果当前系统中已经安装有MySql数据库，安装将会失败。Centos7自带mariadb，与MySql数据库冲突。

   ```apl
   rpm -qa							# 查询当前系统中安装的所有软件
   rpm -qa | grep mysql			# 查询当前系统中安装的名称带有mysql的软件
   rpm -qa | grep mariadb			# 查询当前系统中安装的名称带有mariadb的软件
   ```

2. 卸载已经安装的冲突软件

   ```apl
   rpm -e --nodeps 软件名称						# 卸载软件
   rpm -e --nodeps mariadb-libs-libs版本号		# 卸载mariadb软件
   ```

3. 将MySql安装包上传到Linux并且解压，解压后会得到6个rpm的安装包文件。

   ```apl
   mkdir /usr/local/mysql							# 创建一个mysql目录
   tar -zxvf mysql-版本号 -C /usr/local/mysql		  # 解压至mysql目录
   ```

4. 启动Mysql，我们在Centos7上面安装的东西是之前的999集中老师教的，有点缺陷。凑活用吧。

   启动Mysql服务：service mysql start

   进去Mysql：mysql -uroot -p132456

   我们也可以使用SQLyog来连接，已经保存好东西了。

   上面的是之前的老师教的，与后面老师弄得有出入。

## 5.6 项目部署

### 手动部署项目

1. 在IDEA中SpringBoot项目并打成jar包

2. 将Jar包上传到Linux服务器，放到/usr/local/app里面

3. 启动SpringBoot程序，命令为：`java -jar 【程序名称】`

4. 检查防火墙，确保8080端口是对外面开放的，这个我们已经关闭防火墙了。使用win10访问SpringBoot项目发现可以访问。

5. 改为后台运行SpringBoot程序，并将日志输出到日志文件中。

   目前程序中运行的问题：

   * 线上程序不会采用控制台霸屏的形式运行程序，而是将程序在后台运行。我们的SpringBoot程序运行后会霸屏，终端无法输入，必须重新克隆一个才可以。
   * 线上程序不会讲日志输出到控制台，而是输出到日志文件，方柏霓运维查阅信息。

   ```apl
   nohup命令：英文全称 no hang up(不挂起)，用于不挂断地运行指定命令，退出终端不会影响程序的运行
   语法格式：nohup COmmand [Arg...] [&]
   参数说明：
   	* Command：要执行的命令
   	* Arg：一些参数，可以指定输出文件
   	* &：让命令在后台运行
   举例：
   nohup java -jar boot工程.jar &> hello.log &  # 后台运行Java -jar命令，并将日志输出到hello.log文件。
   ```

6. 停止SpringBoot程序

   通过杀进程的方式来停掉，`ps -ef | grep java` `kill -9 【进程PID】`

   显示进程的时候第一个数字就是进程的PID了，第二个和第三个不用管。root之后的就是PID

### Shell脚本自动部署项目

1. Linux中安装Git

   ```apl
   yum list git			# 列出git安装包
   yum install git			# 在线安装git
   ```

   现在我们已经可以使用git从网上拉取代码下来了，例如：`git clone https://gitee.com/linxuanhi/spring-boot-test.git`，就会创建一个spring-boot-test程序。我们都放在了/usr/local/projects/

2. Linux中安装Maven

   将资料中提供的Maven安装包上传到Linux中，安装Maven

   ```apl
   mkdir /usr/local/maven	# 在/usr/local下面创建文件夹maven
   tar -zxvf apache-maven-3.5.4-bin.tar.gz -C /usr/local/maven # 将maven文件解压至/usr/local/maven
   
   vim /etc/profile					# 打开/etc/profile配置环境变量 增加下面两行代码
   
   export MAVEN_HOME=/usr/local/maven/apache-maven-3.5.4
   export PATH=$JAVA_HOME/bin:$MAVEN_HOME/bin:$PATH
   
   source /etc/profile					# 让修改的配置文件重新加载 生效
   
   mvn -version						# 查看maven版本
   vim /usr/local/maven/apache-maven-3.5.4/conf/settings.xml  # 添加Maven仓库位置 添加下一行代码
   <localRepository>/usr/local/maven/repo</localRepostitory>
   ```

3. 编写Shell脚本（拉取代码、编译、打包、启动）

   在usr/local下面创建sh目录，在sh目录下面创建一个bootStart.sh文件，复制下面内容就可以了。

   ```apl
   cd /usr/local 		# 进入/usr/local目录
   mkdir sh			# 创建sh目录
   cd sh				# 进入sh目录
   vim bootStart.sh	# 创建并打开bootStart.sh文件
   ```

   ```sh
   #!/bin/sh
   echo =================================
   echo  自动化部署脚本启动
   echo =================================
   
   echo 停止原来运行中的工程
   APP_NAME=spring-boot-test
   
   tpid=`ps -ef|grep $APP_NAME|grep -v grep|grep -v kill|awk '{print $2}'`
   if [ ${tpid} ]; then
       echo 'Stop Process...'
       kill -15 $tpid
   fi
   sleep 2
   tpid=`ps -ef|grep $APP_NAME|grep -v grep|grep -v kill|awk '{print $2}'`
   if [ ${tpid} ]; then
       echo 'Kill Process!'
       kill -9 $tpid
   else
       echo 'Stop Success!'
   fi
   
   echo 准备从Git仓库拉取最新代码
   cd /usr/local/projects/spring-boot-test
   
   echo 开始从Git仓库拉取最新代码
   git pull
   echo 代码拉取完成
   
   echo 开始打包
   output=`mvn clean package -Dmaven.test.skip=true`
   
   cd target
   
   echo 启动项目
   nohup java -jar springbootest-0.0.1-SNAPSHOT.jar &> spring-boot-test.log &
   echo 项目启动完成
   ```

4. 为用户授予执行Shell脚本的权限

   ```apl
   chmod 777 bootStart.sh
   ```

5. 执行Shell脚本

6. 修改IP地址 这里我们就不修改了。

现在我们运行情况大概如下：

```bash
[root@192 local]# pwd
/usr/local
[root@192 local]# ll
total 4
drwxr-xr-x. 2 root root   46 Jul  8 22:07 app
drwxr-xr-x. 2 root root    6 Apr 11  2018 bin
drwxr-xr-x. 2 root root    6 Apr 11  2018 etc
drwxr-xr-x. 2 root root    6 Apr 11  2018 games
drwxr-xr-x. 2 root root    6 Apr 11  2018 include
drwxr-xr-x. 4 root root  112 Jul  9 06:52 jdk
drwxr-xr-x. 2 root root    6 Apr 11  2018 lib
drwxr-xr-x. 2 root root    6 Apr 11  2018 lib64
drwxr-xr-x. 2 root root    6 Apr 11  2018 libexec
drwxr-xr-x. 4 root root   81 Jul  9 09:22 maven
drwxr-xr-x. 2 root root 4096 Apr 20 13:33 mysql
drwxr-xr-x. 6 root root   87 Apr 20 20:07 nginx
drwxr-xr-x. 3 root root   30 Jul  9 10:00 projects
drwxr-xr-x. 4 root root   62 Apr 20 14:45 redis
drwxr-xr-x. 2 root root    6 Apr 11  2018 sbin
drwxr-xr-x. 2 root root   26 Jul  9 15:27 sh
drwxr-xr-x. 5 root root   49 Apr 20 18:48 share
drwxr-xr-x. 2 root root    6 Apr 11  2018 src
drwxr-xr-x. 3 root root   69 Apr 20 14:22 tomcat
[root@192 local]# cd projects/
[root@192 projects]# ll
total 0
drwxr-xr-x. 5 root root 58 Jul  9 15:44 spring-boot-test
[root@192 projects]# cd spring-boot-test/
[root@192 spring-boot-test]# ll
total 4
-rw-r--r--. 1 root root 1570 Jul  9 10:01 pom.xml
drwxr-xr-x. 4 root root   30 Jul  9 10:01 src
drwxr-xr-x. 6 root root  205 Jul  9 15:44 target
[root@192 spring-boot-test]# cd /usr/local/sh
[root@192 sh]# ll
```

# 第六章 Linux系统

![](..\图片\2-31【Linux】\1-4.png)

通常情况下，根文件系统所占空间一般应该比较小，因为其中的绝大部分文件都不需要经常改动，而且包括严格的文件和一个小的不经常改变的文件系统不容易损坏。
除了可能的一个叫`/vmlinuz`标准的系统引导映像之外，根目录一般不含任何文件。所有其他文件在根文件系统的子目录中。

1. `/bin`目录
   `/bin`目录包含了引导启动所需的命令或普通用户可能用的命令(可能在引导启动后)。这些命令都是二进制文件的可执行程序(`bin`是`binary`--二进制的简称)，多是系统中重要的系统文件。
2. `/sbin`目录
   `/sbin`目录类似`/bin`，也用于存储二进制文件。因为其中的大部分文件多是系统管理员使用的基本的系统程序，所以虽然普通用户必要且允许时可以使用，但一般不给普通用户使用。
3. `/etc`目录
   `/etc`目录存放着各种系统配置文件，其中包括了用户信息文件`/etc/passwd`，系统初始化文件`/etc/rc`等。linux正是依赖这些文件才得以正常地运行。
4. `/root`目录
   `/root`目录是超级用户的目录。
5. `/lib`目录
   `/lib`目录是根文件系统上的程序所需的共享库，存放了根文件系统程序运行所需的共享文件。这些文件包含了可被许多程序共享的代码，以避免每个程序都包含有相同的子程序的副本，故可以使得可执行文件变得更小，节省空间。
6. `/lib/modules`目录
   `/lib/modules`目录包含系统核心可加载各种模块，尤其是那些在恢复损坏的系统时重新引导系统所需的模块(例如网络和文件系统驱动)。
7. `/dev`目录
   `/dev`目录存放了设备文件，即设备驱动程序，用户通过这些文件访问外部设备。比如，用户可以通过访问`/dev/mouse`来访问鼠标的输入，就像访问其他文件一样。
8. `/tmp`目录
   `/tmp`目录存放程序在运行时产生的信息和数据。但在引导启动后，运行的程序最好使用`/var/tmp`来代替`/tmp`，因为前者可能拥有一个更大的磁盘空间。
9. `/boot`目录
   `/boot`目录存放引导加载器(`bootstraploader`)使用的文件，如`lilo`，核心映像也经常放在这里，而不是放在根目录中。但是如果有许多核心映像，这个目录就可能变得很大，这时使用单独的文件系统会更好一些。还有一点要注意的是，要确保核心映像必须在ide硬盘的前1024柱面内。
10. `/mnt`目录
    `/mnt`目录是系统管理员临时安装(`mount`)文件系统的安装点。程序并不自动支持安装到`/mnt`。`/mnt`下面可以分为许多子目录，例如`/mnt/dosa`可能是使用`msdos`文件系统的软驱，而`/mnt/exta`可能是使用ext2文件系统的软驱，`/mnt/cdrom`光驱等等。
11. `/proc`,`/usr`,`/var`,`/home`目录
    其他文件系统的安装点。

## 6.1 信号与信号量

1. 信号：（signal）是一种处理异步事件的方式。信号是比较复杂的通信方式，用于通知接受进程有某种事件发生，除了用于进程外，还可以发送信号给进程本身。

2. 信号量：（Semaphore）进程间通信处理同步互斥的机制。是在多线程环境下使用的一种设施, 它负责协调各个线程, 以保证它们能够正确、合理的使用公共资源。

简单地说，信号就是一种异步通信，通知进程某种事件的发生；信号量是进程/线程同步与互斥的一种机制，保证进程/线程间之间的有序执行或对公共资源的有序访问

信号量(Semaphore)，有时被称为信号灯，是在多环境下使用的一种设施，是可以用来保证两个或多个关键代码段不被并发调用。在进入一个关键代码段之前，线程必须获取一个信号量；一旦该关键代码段完成了，那么该线程必须释放信号量。其它想进入该关键代码段的线程必须等待直到第一个线程释放信号量。为了完成这个过程，需要创建一个信号量VI，然后将Acquire Semaphore VI以及Release Semaphore VI分别放置在每个关键代码段的首末端。确认这些信号量VI引用的是初始创建的信号量。

1. 信号：（signal）是一种处理异步事件的方式。信号时比较复杂的通信方式，用于通知接受进程有某种事件发生，除了用于进程外，还可以发送信号给进程本身。linux除了支持unix早期的信号语义函数，还支持语义符合posix.1标准的信号函数sigaction。  

2. 信号量：（Semaphore）进程间通信处理同步互斥的机制。是在多线程环境下使用的一种设施, 它负责协调各个线程, 以保证它们能够正确、合理的使用公共资源。 

  竞态条件（race condition）是一个在设备或者系统试图同时执行两个操作的时候出现的不希望的状况，但是由于设备和系统的自然特性，为了正确地执行，操作必须按照合适顺序进行。  在计算机内存或者存储里，如果同时发出读写大量数据的指令的时候竞态条件可能发生，机器试图覆盖相同的或者就的数据，而此时旧的数据仍然在被读取。结果可能是下面一个或者多个情况：计算机死机，出现非法操作提示并结束程序，错误的读取旧的数据，或者错误的写入新数据。在串行的内存和存储访问能防止这种情况，当读写命令同时发生的时候，默认是先执行读操作的。  如果两个或两个以上的线程同时访问相同的对象,或者访问不同步的共享状态.就会出现竞态条件。

## 6.2 杀死进程

**定位进程**

杀死一个没有响应的进程的第一个步骤是定位这个进程。用来定位进程的命令有两个：`top` 和 `ps` 命令。`top` 是每个系统管理员都知道的工具，用 `top` 命令，你能够知道到所有当前正在运行的进程有哪些。在命令行里，输入 `top` 命令能够就看到你正在运行的程序进程

从显示的列表中你能够看到相当重要的信息，举个例子，Chrome 浏览器反映迟钝，依据我们的 `top` 命令显示，我们能够辨别的有四个 Chrome 浏览器的进程在运行，进程的 pid 号分别是 3827、3919、10764 和 11679。这个信息是重要的，可以用一个特殊的方法来结束进程。

尽管 `top` 命令很是方便，但也不是得到你所要信息最有效的方法。 你知道你要杀死的 Chrome 进程是那个，并且你也不想看 `top` 命令所显示的实时信息。 鉴于此，你能够使用 `ps` 命令然后用 `grep` 命令来过滤出输出结果。这个 `ps` 命令能够显示出当前进程列表的快照，然后用 `grep` 命令输出匹配的样式。我们通过 `grep` 命令过滤 `ps` 命令的输出的理由很简单：如果你只输入 `ps` 命令，你将会得到当前所有进程的列表快照，而我们需要的是列出 Chrome 浏览器进程相关的。所以这个命令是这个样子：

```
ps aux | grep chrome
```

这里 `aux` 选项如下所示：

- a = 显示所有用户的进程
- u = 显示进程的用户和拥有者
- x = 也显示不依附于终端的进程

当你搜索图形化程序的信息时，这个 `x` 参数是很重要的。

**结束进程**

现在我们开始结束进程的任务。我们有两种可以帮我们杀死错误的进程的信息。

- 进程的名字
- 进程的 ID （PID）

你用哪一个将会决定终端命令如何使用，通常有两个命令来结束进程：

- `kill` - 通过进程 ID 来结束进程
- `killall` - 通过进程名字来结束进程

有两个不同的信号能够发送给这两个结束进程的命令。你发送的信号决定着你想要从结束进程命令中得到的结果。举个例子，你可以发送 `HUP`（挂起）信号给结束进程的命令，命令实际上将会重启这个进程。当你需要立即重启一个进程（比如就守护进程来说），这是一个明智的选择。你通过输入 `kill -l` 可以得到所有信号的列表，你将会发现大量的信号。

最经常使用的结束进程的信号是：

| Signal Name | Single Value | Effect         |
| ----------- | ------------ | -------------- |
| SIGHUP      | 1            | 挂起           |
| SIGINT      | 2            | 键盘的中断信号 |
| SIGKILL     | 9            | 发出杀死信号   |
| SIGTERM     | 15           | 发出终止信号   |
| SIGSTOP     | 17, 19, 23   | 停止进程       |

好的是，你能用信号值来代替信号名字。所以你没有必要来记住所有各种各样的信号名字。

所以，让我们现在用 `kill` 命令来杀死 Chrome 浏览器的进程。这个命令的结构是：

```
kill SIGNAL PID
```

这里 SIGNAL 是要发送的信号，PID 是被杀死的进程的 ID。我们已经知道，来自我们的 `ps` 命令显示我们想要结束的进程 ID 号是 3827、3919、10764 和 11679。所以要发送结束进程信号，我们输入以下命令：

```
kill -9 3827 
kill -9 3919 
kill -9 10764 
kill -9 11679
```

一旦我们输入了以上命令，Chrome 浏览器的所有进程将会成功被杀死。

我们有更简单的方法！如果我们已经知道我们想要杀死的那个进程的名字，我们能够利用 `killall` 命令发送同样的信号，像这样：

```
killall -9 chrome
```

附带说明的是，上边这个命令可能不能捕捉到所有正在运行的 Chrome 进程。如果，运行了上边这个命令之后，你输入 `ps aux | grep chrome` 命令过滤一下，看到剩下正在运行的 Chrome 进程有那些，最好的办法还是回到 `kIll` 命令通过进程 ID 来发送信号值 `9` 来结束这个进程。

**结束进程很容易**

正如你看到的，杀死错误的进程并没有你原本想的那样有挑战性。当让一个顽固的进程结束的时候，趋向于用 `killall`命令来作为有效的方法来终止，然而，当我让一个真正的活跃的进程结束的时候，`kill`命令是一个好的方法。

